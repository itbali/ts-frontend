<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫</title>
    <link rel="stylesheet" href="./src/style.css" />
  </head>
  <body>
    <div id="app">
      <!-- Auth Section -->
      <div id="auth-container">
        <h1>–¢—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫</h1>
        <div class="tabs">
          <button id="tab-login" class="active">–í—Ö–æ–¥</button>
          <button id="tab-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>

        <form id="login-form">
          <input type="email" id="login-email" placeholder="Email" required />
          <div class="password-wrapper">
            <input
              type="password"
              id="login-password"
              placeholder="–ü–∞—Ä–æ–ª—å"
              required
            />
            <button type="button" class="toggle-password" data-target="login-password">
              üëÅÔ∏è
            </button>
          </div>
          <button type="submit">–í–æ–π—Ç–∏</button>
        </form>

        <form id="register-form" style="display: none">
          <input type="email" id="reg-email" placeholder="Email" required />
          <input
            type="text"
            id="reg-username"
            placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
            required
          />
          <div class="password-wrapper">
            <input
              type="password"
              id="reg-password"
              placeholder="–ü–∞—Ä–æ–ª—å"
              required
            />
            <button type="button" class="toggle-password" data-target="reg-password">
              üëÅÔ∏è
            </button>
          </div>
          <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>
        <p id="auth-error" class="error"></p>
      </div>

      <!-- Dashboard Section -->
      <div id="dashboard-container" style="display: none">
        <div class="dashboard-layout">
            <!-- Sidebar Navigation -->
            <aside class="sidebar">
                <div class="brand">
                    <h2>HabitTrack</h2>
                </div>
                <nav>
                    <button class="nav-btn active" data-view="habits">
                        <span class="icon">üìù</span> –ü—Ä–∏–≤—ã—á–∫–∏
                    </button>
                    <button class="nav-btn" data-view="analytics">
                        <span class="icon">üìä</span> –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
                    </button>
                    <button class="nav-btn" data-view="achievements">
                        <span class="icon">üèÜ</span> –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                    </button>
                    <button class="nav-btn" data-view="history">
                        <span class="icon">üìú</span> –ò—Å—Ç–æ—Ä–∏—è
                    </button>
                    <div class="spacer"></div>
                    <button class="nav-btn" data-view="profile">
                        <span class="icon">üë§</span> –ü—Ä–æ—Ñ–∏–ª—å
                    </button>
                    <button id="btn-logout-sidebar" class="nav-btn logout">
                        <span class="icon">üö™</span> –í—ã—Ö–æ–¥
                    </button>
                </nav>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                
                <!-- View: Habits -->
                <section id="view-habits" class="view-section active">
                    <header class="view-header">
                        <h2>–ú–æ–∏ –ø—Ä–∏–≤—ã—á–∫–∏</h2>
                        <button id="btn-add-habit" class="primary-btn">+ –ù–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞</button>
                    </header>
                    <div id="habit-list" class="grid-container"></div>
                </section>

                <!-- View: Analytics -->
                <section id="view-analytics" class="view-section" style="display: none;">
                    <header class="view-header">
                        <h2>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                    </header>
                    <div id="analytics-content" class="analytics-grid">
                        <div class="stat-card">
                            <h3>–í—Å–µ–≥–æ –ø—Ä–∏–≤—ã—á–µ–∫</h3>
                            <p id="stat-total-habits">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>–ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h3>
                            <p id="stat-completion-rate">0%</p>
                        </div>
                        <div class="stat-card">
                            <h3>–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è</h3>
                            <p id="stat-streak">0 –¥–Ω–µ–π</p>
                        </div>
                    </div>
                </section>

                <!-- View: Achievements -->
                <section id="view-achievements" class="view-section" style="display: none;">
                    <header class="view-header">
                        <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                    </header>
                    <div id="achievements-list" class="grid-container">
                        <!-- Badges rendered here -->
                    </div>
                </section>

                <!-- View: History (Logs) -->
                <section id="view-history" class="view-section" style="display: none;">
                    <header class="view-header">
                        <h2>–ò—Å—Ç–æ—Ä–∏—è</h2>
                    </header>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ü—Ä–∏–≤—ã—á–∫–∞</th>
                                <th>–ó–∞–º–µ—Ç–∫–∞</th>
                            </tr>
                        </thead>
                        <tbody id="logs-table-body">
                            <!-- Logs rendered here -->
                        </tbody>
                    </table>
                </section>

                <!-- View: Profile -->
                <section id="view-profile" class="view-section" style="display: none;">
                    <header class="view-header">
                        <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
                    </header>
                    <div class="profile-card">
                        <div class="form-group">
                            <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                            <input type="text" id="profile-username" readonly />
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="profile-email" readonly />
                        </div>
                        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                        <h3>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h3>
                        <div class="category-controls">
                             <!-- Reusing category management here or keeping it in habits? Let's verify.. User asked for cleaner UI. 
                                  Let's keep Categories Management inside Profile or as a Modal trigger. 
                                  Actually, let's put Category Management as a tool here. -->
                             <button id="btn-manage-categories" class="secondary-btn">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</button>
                             <button id="btn-export-data" class="secondary-btn">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (JSON)</button>
                        </div>
                         <!-- Category Section (Hidden/Toggleable) -->
                        <div id="profile-categories-area" style="display:none; margin-top:20px;">
                             <h4>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
                             <div class="category-controls">
                                <input type="text" id="new-cat-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
                                <input type="color" id="new-cat-color" value="#3b82f6" style="height:40px; width:50px;" />
                                <button id="btn-create-cat" class="primary-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                             </div>
                             <div id="category-list" class="grid-container" style="margin-top:10px;"></div>
                        </div>
                    </div>
                </section>

            </main>
        </div>
      </div>

      <!-- Add Habit Modal -->
      <div id="modal-container" style="display: none">
        <div class="modal">
          <h3>–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤—ã—á–∫—É</h3>
        <div id="habit-preview-container" style="margin-bottom: 16px;">
            <label style="font-size: 0.85em; color: var(--text-muted); display:block; margin-bottom:4px">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</label>
            <div id="habit-preview-card" class="habit-card">
                <div class="habit-info">
                    <h3 id="preview-title">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏</h3>
                    <span id="preview-streak" style="font-size: 0.85rem; color: #6b7280;">üî• 0 –¥–Ω–µ–π</span>
                </div>
                <div class="habit-actions">
                    <button type="button" class="check-btn" style="border-color: #e5e7eb;">
                        <span class="icon">‚úî</span>
                    </button>
                </div>
            </div>
        </div>
          <form id="create-habit-form">
            <div class="form-group">
                <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="habit-title" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, –ß–∏—Ç–∞—Ç—å 30 –º–∏–Ω" required />
            </div>
            
            

            <div class="form-group">
                <label>–ò–∫–æ–Ω–∫–∞</label>
                <div id="emoji-grid" class="emoji-grid">
                    <!-- Emojis will be injected here via JS -->
                </div>
                <input type="hidden" id="habit-icon" value="üìù" />
            </div>

            <div class="form-group">
                <label>–¶–≤–µ—Ç</label>
                <input type="color" id="habit-color" value="#FF5733" style="width: 100%;" />
            </div>
            
            <div class="form-group">
                <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                <select id="habit-category" style="width: 100%; padding: 8px;">
                    <option value="">–ù–µ—Ç</option>
                </select>
            </div>
            
            <div class="modal-actions">
              <button type="button" id="btn-cancel-modal" class="secondary-btn">–û—Ç–º–µ–Ω–∞</button>
              <button type="submit" class="primary-btn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <script type="module" src="./src/main.ts"></script>
  </body>
</html>
